(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.element,o=window.wp.components,i=window.wp.apiFetch;var s=e.n(i);const r=window.wp.i18n,l=function(e){const{deactivationLink:i}=e,[l,a]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,p]=(0,n.useState)(!1),h=(0,n.useMemo)((()=>({found_better_plugin:(0,r.__)("Please share which plugin","pressidium-cookie-consent"),missing_feature:(0,r.__)("Please describe the feature you need","pressidium-cookie-consent"),other:(0,r.__)("Please share the reason","pressidium-cookie-consent")}[l]||(0,r.__)("Provide any additional details","pressidium-cookie-consent"))),[l]),m=(0,n.useCallback)((()=>{window.location.href=i}),[i]);return(0,t.createElement)(o.Flex,{direction:"column",gap:4},(0,t.createElement)(o.FlexItem,null,(0,t.createElement)(o.RadioControl,{selected:l,options:[{label:(0,r.__)("I no longer need the plugin","pressidium-cookie-consent"),value:"no_longer_need"},{label:(0,r.__)("I found a better plugin","pressidium-cookie-consent"),value:"found_better_plugin"},{label:(0,r.__)("It’s missing a feature I need","pressidium-cookie-consent"),value:"missing_feature"},{label:(0,r.__)("I couldn’t get the plugin to work","pressidium-cookie-consent"),value:"could_not_get_to_work"},{label:(0,r.__)("It’s a temporary deactivation","pressidium-cookie-consent"),value:"temporary_deactivation"},{label:(0,r.__)("Other","pressidium-cookie-consent"),value:"other"}],onChange:e=>a(e)})),l?(0,t.createElement)(o.FlexItem,null,(0,t.createElement)(o.TextareaControl,{label:h,value:c,onChange:e=>d(e)})):null,(0,t.createElement)(o.FlexItem,null,(0,t.createElement)(o.Flex,{direction:"row",gap:4},(0,t.createElement)(o.FlexItem,null,(0,t.createElement)(o.Button,{onClick:async()=>{p(!0),await(async()=>{const{route:e,nonce:t}=pressidiumCCFeedbackDetails.api,n={path:e,method:"POST",data:{nonce:t,reason:l,comment:c}};try{await s()(n)}catch(e){console.error(e)}})(),p(!1),m()},disabled:!l||u,isBusy:u,isPrimary:!0},(0,r.__)("Send feedback & deactivate","pressidium-cookie-consent"))),(0,t.createElement)(o.FlexItem,null,(0,t.createElement)(o.Button,{onClick:m},(0,r.__)("Skip & deactivate","pressidium-cookie-consent"))))))},a=document.createElement("template");a.innerHTML='\n  <style>\n    :host {\n      display: block;\n    }\n    \n    .dialog {\n      width: 100%;\n      max-width: 570px;\n      padding: 0;\n    \n      background-color: #ffffff;\n      border: none;\n      border-radius: 2px;\n      box-shadow: 0 0 34px 0 rgba(0, 0, 0, 0.5);\n    }\n    \n    .wrapper {\n      width: 100%;\n      height: 100%;\n      padding: 32px 40px;\n  \n      box-sizing: border-box;\n  \n      display: flex;\n      flex-direction: column;\n    }\n    \n    .title {\n      font-weight: 600;\n      font-size: 1.7rem;\n      line-height: 2.25rem;\n      color: #000;\n  \n      margin: 0;\n      padding: 0;\n      \n      display: none;\n    }\n  \n    .description {\n      font-weight: 400;\n      font-size: 0.9rem;\n      line-height: 1.625;\n      color: rgba(0, 0, 0, 0.88);\n  \n      margin: 4px 0 16px 0;\n      padding: 0;\n      \n      display: none;\n    }\n  </style>\n  <dialog class="dialog">\n    <div class="wrapper" data-wrapper>\n      <h3 class="title"></h3>\n      <p class="description"></p>\n      <div class="content">\n        <slot name="content"></slot>\n      </div>\n    </div>\n  </dialog>\n';class c extends HTMLElement{constructor(){if(super(),"function"!=typeof HTMLDialogElement)return void console.warn("Browser does not support the <dialog> element");this._ref=null,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(a.content.cloneNode(!0)),this._title=this.getAttribute("title")||null,this._description=this.getAttribute("description")||null;const e=this.shadowRoot.querySelector('slot[name="content"]');e.addEventListener("slotchange",(()=>{const[t]=e.assignedNodes();t&&[...t.children||[]].forEach((e=>{e.hasAttribute("data-close")&&e.addEventListener("click",(()=>{this.close()}))}))})),this._update()}get observedAttributes(){return["title","description"]}get title(){return this._title||""}set title(e){this._title=e,this._update(),this.setAttribute("title",this._title)}get description(){return this._description||""}set description(e){this._description=e,this._update(),this.setAttribute("description",this._description)}get ref(){return this._ref}_update(){const e=this.shadowRoot.querySelector(".title"),t=this.shadowRoot.querySelector(".description");this._title&&(e.style.display="block",e.textContent=this._title),this._description&&(t.style.display="block",t.textContent=this._description)}connectedCallback(){this._ref=this.shadowRoot.querySelector("dialog");const e=this.shadowRoot.querySelector(".dialog"),t=this.shadowRoot.querySelector(".wrapper");e.addEventListener("click",(()=>e.close())),t.addEventListener("click",(e=>e.stopPropagation()))}attributeChangedCallback(e,t,n){switch(e){case"title":this._title=n;break;case"description":this._description=n}}close(){this.ref.close()}show(){this.ref.show()}showModal(){this.ref.showModal()}}const d=c;customElements.define("pressidium-dialog",d),(()=>{if("function"!=typeof HTMLDialogElement)return;const e='#the-list [data-slug="pressidium-cookie-consent"] .deactivate a',o="#pressidium-cookie-consent-feedback-dialog",i="#pressidium-cookie-consent-feedback-root",s=document.querySelector(e),r=document.querySelector(o).ref;if(null===s||null===r)return;const a=s.getAttribute("href");s.addEventListener("click",(e=>{e.preventDefault(),null!==r?r.showModal():window.location.href=a}));const c=document.querySelector(i);(0,n.render)((0,t.createElement)(l,{deactivationLink:a}),c)})()})();